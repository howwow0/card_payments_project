# CPP Keys Starter

Стартер для модуля выдачи JWT токенов и стартера Card Decryption Starter.
Данный стартер является сервисом для работы с ключами. (Аналог внешних систем работы с ключами)

---

## Подключение
### Gradle

```groovy
dependencies {
    api project(':keys-starter')
}
```

---

## Конфигурация

Для корректной работы необходимо указать настройки подключения к H2 базе, где хранятся 2 ключа:

- `card-name` - используется для расшифровки данных карты (название ключа в таблице).
- `jwt-name` - используется для подписи и проверки JWT (название ключа в таблице).

### Пример `application.yml`:

```properties
keydb:
datasource:
url: ${KEY_DB_URL}
username: ${KEY_DB_USERNAME}
password: ${KEY_DB_PASSWORD}
card-name: ${CARD_NAME_KEY}
jwt-name: ${JWT_NAME_KEY}

```

> Убедитесь, что база доступна и содержит таблицу с ключами.

---

## Ожидаемая структура таблицы `keys`

Таблица `private_keys` должна содержать 2 строки с фиксированными `key_name`:

| key_name            | key_value           |
|---------------------|---------------------|
| card_encryption_key | your-encryption-key |
| jwt_signing_key     | your-signing-key    |

---

## Что делает стартер

- Подключается к H2, чтобы получить ключи. Предоставляет классы для этого.


---

## Примечания

- `card_key` должен быть длиной 16, 24 или 32 байта (AES-ключ).
- Библиотека не управляет схемой БД, схема создается через liquibase.